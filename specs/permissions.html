<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Permissions - NightOS documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Design and specification documents for NightOS">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">NightOS documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ClementNerma/NightOS" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="permissions"><a class="header" href="#permissions">Permissions</a></h1>
<p>Permissions are used to <a href="../features/permissions.html">control what applications can do or not</a>. They have no effect by themselves, but allow different <a href="services/system/README.html">system services</a> to ensure an application has enough permissions to perform a specific action.</p>
<p><strong>WARNING:</strong> This document is <strong>far from being complete</strong>, and as such may be edited in any way at any moment.</p>
<h2 id="levels-of-permissions"><a class="header" href="#levels-of-permissions">Levels of permissions</a></h2>
<p>Permissions are split across five different levels:</p>
<ul>
<li>Level 1: non-sensitive permission like creating a window ; these are granted automatically by defualt</li>
<li>Level 2: accessing and modifying non-critical parts of the state of the system, like controlling the global volume</li>
<li>Level 3: performing sensitive actions, like reading files or accessing the network</li>
<li>Level 4: performing highly-sensitive actions, like accessing the microphone or the webcam</li>
</ul>
<p>There are also <a href="../features/domains.html">domain-controlled permissions</a> as well as <a href="../technical/dev-mode.html#application-proxies">application proxies</a> which influence how permissions are granted.</p>
<p>When using visual applications, requesting interactive, sensitive and privacy permissions will show a popup asking the user if they want to grant the permission:</p>
<ul>
<li>Only one time</li>
<li>For the active application (until it stops)</li>
<li>For the current session (until the user logs out or the system is shutdown)</li>
<li>Forever</li>
</ul>
<p>By default, it is set to "forever". But for the privacy level, this choice is set by default to "forever while the application is active", which prevents the application from accessing them from background tasks.</p>
<p><em>NOTE:</em> If the application is uninstalled and re-installed later, all the granted permissions will have been dropped, so confirmation will be required again.</p>
<p><em>NOTE:</em> Permissions granted to volatile applications are saved using the application's hash, so while the exact same application is opened volatilely, permissions are kept in memory.</p>
<p><em>NOTE:</em> Permissions are specific to the current user (the AUC is not taken in account here), so in the case of a global application, each user will have to approve the permission manually (unless the administrator set it otherwise).</p>
<h2 id="user-privileges"><a class="header" href="#user-privileges">User privileges</a></h2>
<p>Some permissions require the user to be an <a href="../concepts/users.html#user-permissions-level">administrator</a>. These permissions are marked in this document with an <code>{A}</code>.</p>
<h2 id="list-of-permissions"><a class="header" href="#list-of-permissions">List of permissions</a></h2>
<p>Below is the exhaustive list of all available permissions, with their level between parenthesis (e.g. <code>(5)</code> for level 5, etc.).</p>
<p>Many permissions require to have an associated <em>scope</em>, indicating the resources they can access. Each scope is a path or filesystem with a set of permissions that apply on this specific path/filesystem.</p>
<h3 id="devices"><a class="header" href="#devices">Devices</a></h3>
<p><strong>Scope:</strong> list of <a href="services/system/hw.html#patterns">device patterns</a> the permission applies on</p>
<ul>
<li>(4) <code>devices.enum</code>: enumerate devices</li>
<li>(4) <code>devices.subscribe</code>: subscribe to devices</li>
<li>(4) <code>devices.register_driver</code>: register a device driver</li>
<li>(4) <code>devices.ask_driver</code>: ask a device's driver to perform a <a href="services/system/hw.html#normalization">normalized method</a></li>
</ul>
<p>For praticity purpose, the list of device patterns is converted to a human-readable format, with more or less informations depending on the <a href="../concepts/users.html#complexity-level">user's complexity level</a>.</p>
<h3 id="filesystems"><a class="header" href="#filesystems">Filesystems</a></h3>
<p><strong>Scope</strong>: filesystems the permission applies on</p>
<ul>
<li>(2) <code>fs.filesystems.mounted</code>: check if a given filesystem is mounted (all other <code>fs.filesystems.*</code> permissions imply this one)</li>
<li>(3) <code>fs.filesystems.metadata</code>: get metadata on a given filesystem</li>
<li>(3) <code>fs.filesystems.list</code>: enumerate mounted filesystems</li>
<li>(3) <code>fs.filesystems.mount</code>: mount an existing filesystem</li>
<li>(3) <code>fs.filesystems.unmount</code>: unmount filesystems mounted by other applications</li>
<li>(3) <code>fs.filesystems.watch</code>: be notified when a filesystem is mounted / unmounted</li>
<li>(3) <code>fs.filesystems.format</code>: format an existing filesystem</li>
</ul>
<h3 id="filesystem-elements"><a class="header" href="#filesystem-elements">Filesystem elements</a></h3>
<p><strong>Scope</strong>: <a href="services/integration/filesystem-interfaces.html#split-paths">paths</a> the permission applies on</p>
<p>These permissions are automatically granted if their scope is one of the application's own data directories.</p>
<ul>
<li>
<p>(3) <code>fs.feid.path</code>: convert a given <a href="filesystem.html#element-unique-identifier">FEID</a> to a <a href="services/integration/filesystem-interfaces.html#split-paths">split path</a></p>
</li>
<li>
<p>(3) <code>fs.feid.exists</code>: check if a given <a href="filesystem.html#element-unique-identifier">FEID</a> exists in a filesystem</p>
</li>
<li>
<p>(3) <code>fs.path.canonicalize</code>: canonicalize a <a href="services/integration/filesystem-interfaces.html#split-paths">split path</a></p>
</li>
<li>
<p>(3) <code>fs.items.exists</code>: check if an item exists at a given path</p>
</li>
<li>
<p>(3) <code>fs.items.metadata</code>: get metadata on a given item</p>
</li>
<li>
<p>(3) <code>fs.items.create</code>: create new filesystem elements</p>
</li>
<li>
<p>(3) <code>fs.items.move</code>: rename and move existing filesystem elements</p>
</li>
<li>
<p>(3) <code>fs.items.remove.trash</code>: send items to the current user's trash</p>
</li>
<li>
<p>(3) <code>fs.items.remove</code>: delete items permanently</p>
</li>
<li>
<p>(3) <code>fs.items.read</code>: read an existing filesystem element's content</p>
</li>
<li>
<p>(3) <code>fs.items.write</code>: update an existing filesystem element's content</p>
</li>
<li>
<p>(3) <code>fs.dir.read</code>: list items contained inside given directories</p>
</li>
<li>
<p>(3) <code>fs.dir.read.hidden</code>: list hidden items in directories</p>
</li>
<li>
<p>(3) <code>fs.dir.lock</code>: lock a full directory's content to prevent modifications from other processes</p>
</li>
<li>
<p>(3) <code>fs.dir.lock.full</code>: lock a full directory's content to prevent modifications and access from other processes</p>
</li>
<li>
<p>(3) <code>fs.symlinks.create</code>: create symbolic links</p>
</li>
<li>
<p>(3) <code>fs.symlinks.update</code>: update existing symbolic links</p>
</li>
<li>
<p>(3) <code>fs.symlinks.read</code>: read the target of a symbolic link</p>
</li>
</ul>
<h4 id="flows"><a class="header" href="#flows">Flows</a></h4>
<ul>
<li>(3) <code>flow.list</code>: list flows opened by all applications</li>
<li>(3) <code>flow.metadata</code>: get metadata on flows</li>
<li>(1) <code>flow.create</code>: create flows</li>
<li>(3) <code>flow.read</code>: read from flows</li>
<li>(3) <code>flow.write</code>: write to flows</li>
</ul>
<h3 id="network"><a class="header" href="#network">Network</a></h3>
<ul>
<li>(3) <code>net.fetch</code>: fetch a resource<br />
<strong>Scope:</strong> list of domains (wildcards supported for subdomains), list of protocols</li>
<li>(3) <code>net.expose</code>: listen to a specific port or a range of ports
<strong>Scope:</strong> range of ports (may cover a single port)</li>
</ul>
<h3 id="user-accounts"><a class="header" href="#user-accounts">User accounts</a></h3>
<ul>
<li>(1) <code>users.current.level</code>: get the current user's <a href="../concepts/users.html#user-permissions-level">permission level</a></li>
<li>(1) <code>users.current.name</code>: get the name of the current user account</li>
<li>(1) <code>users.current.icon</code>: get the icon associated to the current user account</li>
<li>(4) <code>users.current.photo</code>: get the (optional) photo associated to the current user account</li>
<li>(3) <code>users.current.lastconn</code>: get the timestamp of the current user's last login</li>
</ul>
<p>All these permissions have a variant to get informations about other user accounts (replace <code>current</code> with <code>all</code>). These have the same permission level but require the current user to be administrator.</p>
<h3 id="system"><a class="header" href="#system">System</a></h3>
<ul>
<li>
<p>(1) <code>system.clock.date.read</code>: get the current date</p>
</li>
<li>
<p>(1) <code>system.clock.time.read</code>: get the current time</p>
</li>
<li>
<p>(1) <code>system.clock.timezone.read</code>: get the current timezone</p>
</li>
<li>
<p>(1) <code>system.clock.uptime</code>: get the system's uptime</p>
</li>
<li>
<p>(1) <code>system.hw.cpu.count</code>: get the number of CPUs</p>
</li>
<li>
<p>(1) <code>system.hw.cpu.list</code>: list CPUs (model, frequency, etc.)</p>
</li>
<li>
<p>(1) <code>system.hw.mem.total</code>: get the amount of total memory</p>
</li>
<li>
<p>(1) <code>system.hw.mem.available</code>: get the amount of available memory</p>
</li>
<li>
<p>(1) <code>system.hw.mem.slots</code>: get the number of RAM slots</p>
</li>
<li>
<p>(1) <code>system.hw.mem.list</code>: list RAM slots (model, frequency, etc.)</p>
</li>
</ul>
<h3 id="hardware-interfaces"><a class="header" href="#hardware-interfaces">Hardware interfaces</a></h3>
<ul>
<li>(4) <code>hwmid.keyboard.write</code>: simulate key presses</li>
<li>(5) <code>hwmid.keyboard.read</code>: read key presses from the keyboard</li>
<li>(4) <code>hwmid.pointer.write</code>: simulate actions from pointer devices</li>
<li>(5) <code>hwmid.pointer.read</code>: read actions from pointer devices</li>
<li>(5) <code>hwmid.video.read</code>: access video input streams (cameras, ...)</li>
<li>(5) <code>hwmid.audio.read</code>: access audio input streams (microphones, ...)</li>
<li>(5) <code>hwmid.screen.read</code>: read portions of the screen as image buffers (screenshots, ...)</li>
<li>(1) <code>hwmid.screen.read_self</code>: read portions of the current application's windows (screenshots, ...)</li>
</ul>
<h3 id="state"><a class="header" href="#state">State</a></h3>
<ul>
<li>(1) <code>state.laptop.is</code>: check if the device is a laptop</li>
<li>(1) <code>state.laptop.is_open</code>: check if the laptop is physically opened</li>
<li>(1) <code>state.battery.has</code>: check if the device has a battery</li>
<li>(1) <code>state.battery.level</code>: check the battery level</li>
<li>(1) <code>state.battery.is_charging</code>: check if the battery is charging</li>
<li>(1) <code>state.battery.is_full</code>: check if the battery is considered full</li>
<li>(1) <code>state.battery.is_critical</code>: check if the battery is at a critically low level</li>
<li>(1) <code>state.battery.estimated_remaining</code>: get the remaining running time estimated by the system in minutes</li>
</ul>
<h3 id="programs"><a class="header" href="#programs">Programs</a></h3>
<ul>
<li>(5) + {A} <code>programs.running.processes</code>: get the list of all running processes</li>
<li>(5) + {A} <code>programs.running.windows</code>: get informations on each running application's windows</li>
<li>(5) <code>programs.running.apps</code>: get the list of running applications</li>
</ul>
<h3 id="system-reserved-permissions"><a class="header" href="#system-reserved-permissions">System-reserved permissions</a></h3>
<p>These permissions are reserved to processes <a href="kernel/processes.html#process-attributes">marked as system</a>.</p>
<ul>
<li><code>sysapp.process.kill</code>: suspend or kill external processes</li>
<li><code>sysapp.process.signal</code>: send a signal to an external process</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../specs/update-processes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../specs/containers.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../specs/update-processes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../specs/containers.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
